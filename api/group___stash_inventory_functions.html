<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>SkyBox: Stash Inventory Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SkyBox
   &#160;<span id="projectnumber">0.8</span>
   </div>
   <div id="projectbrief">Share items between Skyrim playthroughs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Stash Inventory Functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad1c58bdb4127341808fdbfea96dec351"><td class="memItemLeft" align="right" valign="top">Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___stash_inventory_functions.html#gad1c58bdb4127341808fdbfea96dec351">vSS_API_Stash::LoadStashesForCell</a> (Cell akCell)</td></tr>
<tr class="separator:gad1c58bdb4127341808fdbfea96dec351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c1ce692dc0d96e828d52a485864cca4"><td class="memItemLeft" align="right" valign="top">Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___stash_inventory_functions.html#ga2c1ce692dc0d96e828d52a485864cca4">vSS_API_Stash::ImportStashRefItems</a> (ObjectReference akStashRef, Bool abForce=False)</td></tr>
<tr class="separator:ga2c1ce692dc0d96e828d52a485864cca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf88d29adecca0dde764d5fcab038e8ae"><td class="memItemLeft" align="right" valign="top">Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___stash_inventory_functions.html#gaf88d29adecca0dde764d5fcab038e8ae">vSS_API_Stash::ScanContainer</a> (ObjectReference akStashRef)</td></tr>
<tr class="separator:gaf88d29adecca0dde764d5fcab038e8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga856529a791cdefe67fede7b505cdf5a1"><td class="memItemLeft" align="right" valign="top">Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___stash_inventory_functions.html#ga856529a791cdefe67fede7b505cdf5a1">vSS_API_Stash::UpdateStashData</a> (String asUUID)</td></tr>
<tr class="separator:ga856529a791cdefe67fede7b505cdf5a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf97c4da16a0bfc8907b1aa153756090e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___stash_inventory_functions.html#gaf97c4da16a0bfc8907b1aa153756090e">vSS_API_Stash::ExportStash</a> (String asUUID, Bool abSkipBackup=False)</td></tr>
<tr class="separator:gaf97c4da16a0bfc8907b1aa153756090e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>=== Stash object inventory Functions ===&ndash; These functions manipulate the contents of the Stash Containers in-game. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaf97c4da16a0bfc8907b1aa153756090e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vSS_API_Stash::ExportStash </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>asUUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&#160;</td>
          <td class="paramname"><em>abSkipBackup</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Exports the data for the specified Stash to a file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">asUUID</td><td>The UUID of the Stash. </td></tr>
    <tr><td class="paramname">abSkipBackup</td><td>If True, don't do the usual file rotation before writing. Default: False. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This should usually be called right after <a class="el" href="group___stash_inventory_functions.html#ga856529a791cdefe67fede7b505cdf5a1">UpdateStashData()</a>;</dd></dl>

</div>
</div>
<a class="anchor" id="ga2c1ce692dc0d96e828d52a485864cca4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Int vSS_API_Stash::ImportStashRefItems </td>
          <td>(</td>
          <td class="paramtype">ObjectReference&#160;</td>
          <td class="paramname"><em>akStashRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&#160;</td>
          <td class="paramname"><em>abForce</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Populate akStashRef with the Stash items. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">akStashRef</td><td>The ObjectReference of the Stash. </td></tr>
    <tr><td class="paramname">abForce</td><td>Populate the Container even if the script already thinks it's up to date. Default: False. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of ItemEntries placed in the Container, or 0 for an invalid Stash. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the Container already contains items, its inventory will be merged with the Stash contents. This new item list will NOT be saved until the Player opens the Container, though.</dd></dl>

</div>
</div>
<a class="anchor" id="gad1c58bdb4127341808fdbfea96dec351"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Int vSS_API_Stash::LoadStashesForCell </td>
          <td>(</td>
          <td class="paramtype">Cell&#160;</td>
          <td class="paramname"><em>akCell</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find and populate all the Stash Containers for the specified Cell. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">akCell</td><td>The Cell to load the Stashes for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number Stashes loaded for the Cell.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not attempt to use this for a Cell that is not currently loaded! ObjectReferences for unloaded Cells return None, so they will NOT get populated properly!</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Depending on the number of Stashes and how many items are in them, this may takes some time to return. Under normal circumstances it should still be less than a second, though.</dd></dl>

</div>
</div>
<a class="anchor" id="gaf88d29adecca0dde764d5fcab038e8ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Int vSS_API_Stash::ScanContainer </td>
          <td>(</td>
          <td class="paramtype">ObjectReference&#160;</td>
          <td class="paramname"><em>akStashRef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For anyone reading this, I had this whole scan working perfectly in pure Papyrus. It was beautiful. It used several containers working in parallel to sort and scan everything. For Papyrus, it was blindingly fast. By any realistic standard, though, it was also mind-numbingly slow. Call it a moral victory. At any rate, I gave up on doing it in pure Papyrus and instead learned c++ well enough to reimplement it in an SKSE plugin. Now it's nearly instantaneous. So it goes. </p>
<p>Creates a new JMap containing the ItemEntries for the specified Container. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">akStashRef</td><td>The ObjectReference of the Stash. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The ID of a new JMap containing the Stash Container's contents.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The JMap is not set to be retained, so it will expire unless written to the JDB or otherwise marked for retention. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Although this was written to be used on a newly created Stash, it can be used on any Container to quickly get its contents.</dd></dl>

</div>
</div>
<a class="anchor" id="ga856529a791cdefe67fede7b505cdf5a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Int vSS_API_Stash::UpdateStashData </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>asUUID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates the stored data for the specified Stash based on its Container contents. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">asUUID</td><td>The UUID of the Stash. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The ItemEntry count of the Stash, or 0 for a problem. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This updates the stored data for a Stash, doing a full inventory scan and ticking the data version. It also updates the various metadata to reflect the currently loaded character and Session. It does not write the Stash data to a file, only the persistent Registry. </dd></dl>
<dl class="section user"><dt></dt><dd>This is a resource-intensive function and should be used only when the contents of the Stash's Container have been changed.</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
